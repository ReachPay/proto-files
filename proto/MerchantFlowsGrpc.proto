
syntax = "proto3";
import "google/protobuf/empty.proto";
package merchantflows;

message MerchantFlowsResolveMerchantRequest {
    string ApiKey = 1;
}

message MerchantFlowsResolveMerchantResponse{
    optional string MerchantId = 1;
}

message MerchantFlowsAddMerchantRequest {
    string Id = 1;
    string ApiKey = 2;
}

message MerchantFlowsEnableDisableRequest {
    string Id = 1;
    bool Enable = 2;
}

message MerchantFlowsUpdateApiKeyRequest {
    string Id = 1;
    string ApiKey = 2;
}

message MerchantFlowsResolveClientMerchnatRequest {
    string ClientId = 1;
}

message MerchantFlowsIsMerchantResponse {
    optional string MerchantId = 1;
}

message MerchantFlowsAddCallbackUrlRequest{
    string MerchantId = 1;
    string CallbackUrl = 2;
}

message MerchantFlowsRemoveCallbackUrlRequest{
    string MerchantId = 1;
    string CallbackUrl = 2;
}

message MerchantFlowsUpdateComissionSettingsRequest{
    string MerchantId = 1;
    double ComissionPercent = 2;
}

message MerchantFlowsGetMerchantSettingsRequest{
    string MerchantId = 1;
}

message MerchantFlowsGetMerchantSettingsResponse{
    merchantflows.MerchantFlowsMerchantSettingsModel Settings = 1;
}

message MerchantFlowsMerchantSettingsModel{
    repeated string CallbackUrls = 1;
    double ComissionPercent = 2;
    string ApiKey = 3;
}
message MerchantFlowsGetCallbacksLogsRequest{
    string MerchantId = 1;
    int64 From = 2;
    int64 To = 3;
}

message MerchantFlowsCallbackLogModel{
    int64 ExecuteDate = 1;
    int64 CreateDate = 2;
    int32 HttpStatusCode = 3;
    string Message = 4;
    string Url = 5;
    optional string  OrderId = 6;
    string MerchantId = 7;
    string RequestBody = 8;
    string ResponseBody = 9;
    int32 Attempt = 10;
}

enum MerchantFlowsCallbackOverrideType{
    FirstConfirm = 0;
    FullConfirm = 1;
}

message MerchantFlowsMerchantOverrideModel{
    string Currency = 1;
    string Network = 2;
    merchantflows.MerchantFlowsCallbackOverrideType OverrideType = 3;
}

message MerchantFlowsAddMerchantOverrideRequest{
    string MerchantId = 1;
    merchantflows.MerchantFlowsMerchantOverrideModel MerchantOverride = 2;
}

message MerchantFlowsGetMerchantOverridesRequest{
    string MerchantId = 1;
}

message MerchantFlowsSetAllCallbackOverrideOverridesRequest{
    string MerchantId = 1;
    merchantflows.MerchantFlowsCallbackOverrideType OverrideType = 2;
}

message MerchantFlowsMerchantMemberRequest{
    string ClientId = 1;
    string MerchantId = 2;
}


service MerchantFlowsService {
    rpc Resolve(merchantflows.MerchantFlowsResolveMerchantRequest) returns (merchantflows.MerchantFlowsResolveMerchantResponse);
    rpc Add(merchantflows.MerchantFlowsAddMerchantRequest) returns (google.protobuf.Empty);
    rpc EnableDisable(merchantflows.MerchantFlowsEnableDisableRequest) returns (google.protobuf.Empty);
    rpc UpdateApiKey(merchantflows.MerchantFlowsUpdateApiKeyRequest) returns (google.protobuf.Empty);
    rpc ResolveMerchnat(merchantflows.MerchantFlowsResolveClientMerchnatRequest) returns (merchantflows.MerchantFlowsIsMerchantResponse);
    rpc AddCallbackUrl(merchantflows.MerchantFlowsAddCallbackUrlRequest) returns (google.protobuf.Empty);
    rpc RemoveCallbackUrl(merchantflows.MerchantFlowsRemoveCallbackUrlRequest) returns (google.protobuf.Empty);
    rpc UpdateComissionSettings(merchantflows.MerchantFlowsUpdateComissionSettingsRequest)  returns (google.protobuf.Empty);
    rpc GetMerchantSettings(merchantflows.MerchantFlowsGetMerchantSettingsRequest) returns (merchantflows.MerchantFlowsGetMerchantSettingsResponse);
    rpc GetMerchantCallbackLogs(merchantflows.MerchantFlowsGetCallbacksLogsRequest) returns (stream merchantflows.MerchantFlowsCallbackLogModel);
    rpc AddMerchantCallbackOverride(merchantflows.MerchantFlowsAddMerchantOverrideRequest) returns (google.protobuf.Empty);
    rpc GetMerchantCallbackOverrides(merchantflows.MerchantFlowsGetMerchantOverridesRequest) returns (stream merchantflows.MerchantFlowsMerchantOverrideModel);
    rpc ResetDefaultCallbackSettings(merchantflows.MerchantFlowsGetMerchantOverridesRequest) returns (google.protobuf.Empty);
    rpc SetAllCallbackOverride(merchantflows.MerchantFlowsSetAllCallbackOverrideOverridesRequest) returns (google.protobuf.Empty);
    rpc AddMerchantMember(merchantflows.MerchantFlowsMerchantMemberRequest) returns (google.protobuf.Empty);
    rpc RemoveMerchantMember(merchantflows.MerchantFlowsMerchantMemberRequest) returns (google.protobuf.Empty);
    rpc Ping(google.protobuf.Empty) returns (google.protobuf.Empty);
}

